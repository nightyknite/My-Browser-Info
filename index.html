<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width,initial-scale=1" />
	<title>My Browser Info</title>
	<style>
	#app {text-align: center}
	h1 {font-size: 100%}
	table,tr,td {with:100%}
	dl,
	dt,
	dd {
	  box-sizing: border-box;
	}
	dl {
	  background: #FAFAD2;
	  border-right: 1px solid #ccc;
	  border-bottom: 1px solid #ccc;
	  border-left: 1px solid #ccc;
	}
	dt,
	dd {
	  border-top: 1px solid #ccc;
	}
	dt {
	  width: 40%;
	  float: left;
	}
	dd {
	  background: #fff;
	  margin-left: 40%;
	  border-left: 1px solid #ccc;
	}
	dd:after {
	  content: '';
	  display: block;
	  clear: both;
	}
	</style>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.13/vue.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.17.1/axios.min.js"></script>
</head>
<body>

<div id="app">
	<h1>My Browser Info</h1>

<dl>
    <dt>Public IP</dt>
    <dd>{{ public_ip }}</dd>
    <dt>UserAgent</dt>
    <dd>{{ user_agent }}</dd>
    <dt>Accept-Language</dt>
    <dd>{{ accept_language }}</dd>
    <dt>Platform</dt>
    <dd>{{ platform }}</dd>
    <dt>Screen Width</dt>
    <dd>{{ screen_width }}</dd>
    <dt>Screen Height</dt>
    <dd>{{ screen_height }}</dd>
    <dt>緯度(latitude)</dt>
    <dd>{{ latitude }}</dd>
    <dt>経度(longitude)</dt>
    <dd>{{ longitude }}</dd>
    <dt>Google Map</dt>
    <dd> <img v-bind:src="mapimage_url " v-show="mapimage_url"></dd>

    <dt>OS</dt>
    <dd>{{ os }}</dd>

    <dt>Browser</dt>
    <dd>{{ browser }}</dd>

    <dt>Vendor Fragments</dt>
    <dd>{{ vendor_fragments }}</dd>
    
    
</dl>
</div>
<script>
var app = new Vue({
  el: '#app',
  data: {
    user_agent : '',
    accept_language : '',
    platform : '',
    screen_width : '',
    public_ip : '',
    screen_height : '',
    latitude : '',
    longitude : '',
    mapimage_url : '',
    os : '',
    browser : '',
    vendor_fragments : ''

  },
  created: function () {

	axios.get("https://api.ipify.org/?format=json")
    	.then(response => {this.public_ip = response.data.ip}
    )

    this.user_agent = navigator.userAgent;


    this.accept_language = navigator.languages;
    
    this.platform = navigator.platform;

    this.screen_width = parent.screen.width;
    this.screen_height = parent.screen.height;

    // geolocation
    navigator.geolocation.getCurrentPosition( function(position){
        app.latitude = position.coords.latitude;
        app.longitude = position.coords.longitude;

    app.mapimage_url  = "https://maps.googleapis.com/maps/api/staticmap?center=" + app.latitude + "," + app.longitude + "&zoom=13&size=300x300&sensor=false";


    } , function(){} , {} );

    var ua = navigator.userAgent.toLowerCase();

    // OS
    var os = "n/a";
    if (ua.indexOf("iphone") > 0) {
        os = "iPhone";
    } else if (ua.indexOf("android") > 0) {
        os = "Android";
    } else if (ua.indexOf("windows") > 0) {
        os = "Windows";
    } else if (ua.indexOf("mac") > 0) {
        os = "Mac";
    } else if (ua.indexOf("linux") > 0) {
        os = "Linux";
    }

    this.os = os;

    //
    var browser = "n/a";

    this.browser = browser;

    // vendor_fragments

    axios.get("vendor_fragments.json")
        .then(response => {
            for (var item in response.data) {
                if (ua.indexOf(item.toLowerCase()) > 0) {
                  app.vendor_fragments = item + ':' + response.data[item].title;
                  break;
                }
            }
        }   
    )


   


  }

})
</script>
</body>
</html>
